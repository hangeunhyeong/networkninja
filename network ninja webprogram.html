<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>날씨 상세정보 대시보드</title>
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: Arial, Helvetica, sans-serif;
      background: #f4f4f4;
      color: #333;
    }

    header {
      background: #2196f3;
      color: #fff;
      padding: 1.2rem 0;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
    }

    /* ===== 네비게이션 (메트릭 선택) ===== */
    #metric-menu {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background: #fff;
      padding: 0.5rem 0;
      position: sticky;
      top: 0;
      z-index: 100;
      border-bottom: 1px solid #e0e0e0;
    }

    #metric-menu button {
      margin: 0.25rem;
      padding: 0.6rem 1.1rem;
      border: none;
      background: #eeeeee;
      border-radius: 4px;
      cursor: pointer;
      transition: background 0.25s ease;
      font-size: 0.9rem;
    }

    #metric-menu button:hover {
      background: #d5d5d5;
    }

    #metric-menu button.active {
      background: #2196f3;
      color: #fff;
      font-weight: 600;
    }

    /* ===== 차트 영역 ===== */
    #chart-container {
      width: 92%;
      max-width: 900px;
      margin: 2rem auto 3rem;
      background: #fff;
      padding: 1.5rem 1.2rem;
      border-radius: 6px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    }

    canvas {
      width: 100% !important;
      height: 420px !important;
    }
  </style>
</head>
<body>
  <header>
    <h1>날씨 상세정보 대시보드</h1>
  </header>

  <!-- 메트릭 선택 메뉴 -->
  <nav id="metric-menu">
    <button data-metric="temperature">기온</button>
    <button data-metric="precipitation">강수량</button>
    <button data-metric="humidity">수증기량</button>
    <button data-metric="pop">비올 확률</button>
    <button data-metric="uvi">자외선 지수</button>
    <button data-metric="pm">미세먼지 지수</button>
    <button data-metric="wind">바람 속도</button>
    <button data-metric="windDir">풍향</button>
  </nav>

  <!-- 차트 출력 영역 -->
  <main id="chart-container">
    <canvas id="metricChart"></canvas>
  </main>

  <script>
    /* ================================
       가상의 샘플 데이터 (7일치)
       실제 구현 시 API 연동으로 교체
    =================================*/
    const sample = {
      labels: ["월","화","수","목","금","토","일"],
      temperature: [21, 22, 18, 19, 23, 24, 25],        // °C
      precipitation: [2, 5, 0, 1, 3, 8, 12],            // mm
      humidity: [65, 60, 70, 68, 72, 75, 78],           // %
      pop: [10, 20, 5, 15, 30, 50, 70],                 // %
      uvi: [5, 6, 4, 5, 7, 8, 9],                       // UV Index
      pm: [30, 35, 40, 45, 25, 20, 18],                 // μg/m³
      wind: [10, 12, 8, 9, 14, 13, 11],                // m/s
      windDir: [90, 120, 110, 100, 130, 140, 85]        // degrees
    };

    /* ================================
       Chart.js 기본 세팅
    =================================*/
    const ctx = document.getElementById('metricChart').getContext('2d');

    // 초기(기온) 차트 생성
    let chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: sample.labels,
        datasets: [{
          label: '기온(°C)',
          data: sample.temperature,
          fill: false,
          borderWidth: 2,
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true }
        },
        scales: {
          y: { beginAtZero: false }
        }
      }
    });

    /* ================================
       메트릭 선택 시 차트 업데이트
    =================================*/
    function updateChart(metric) {
      const mapping = {
        temperature: {label: "기온(°C)", data: sample.temperature},
        precipitation: {label: "강수량(mm)", data: sample.precipitation},
        humidity: {label: "수증기량(%)", data: sample.humidity},
        pop: {label: "비올 확률(%)", data: sample.pop},
        uvi: {label: "자외선 지수", data: sample.uvi},
        pm: {label: "미세먼지 지수(μg/m³)", data: sample.pm},
        wind: {label: "바람 속도(m/s)", data: sample.wind},
        windDir: {label: "풍향(°)", data: sample.windDir}
      };

      chart.data.datasets[0].label = mapping[metric].label;
      chart.data.datasets[0].data = mapping[metric].data;
      chart.update();

      // 활성 버튼 표시 변경
      document.querySelectorAll('#metric-menu button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`#metric-menu button[data-metric="${metric}"]`).classList.add('active');
    }

    // 버튼 클릭 이벤트 바인딩
    document.querySelectorAll('#metric-menu button').forEach(btn => {
      btn.addEventListener('click', () => updateChart(btn.dataset.metric));
    });

    // 첫 화면은 기온 데이터 표시
    updateChart('temperature');
  </script>
</body>
</html>